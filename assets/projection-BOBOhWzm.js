const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C1aGfQcb.js","assets/index-qkyhuh7d.css"])))=>i.map(i=>d[i]);
import{Q as j,hR as w,bt as W,cr as V,hS as rn,aE as b,aF as ln,hT as un,hc as C,b8 as L,dH as g,co as H,aO as an,cM as K,cS as cn,cu as fn,dT as hn,c1 as pn,gF as dn,cn as mn,hU as gn,d3 as D,d4 as F,g2 as q}from"./index-C1aGfQcb.js";import{n as O,G as wn,E as _n}from"./projectBuffer-CZ7yaGuo.js";function yn(e,t,n){if(t==null||n==null||n.vcsWkid||j(t,n)||w(t)||w(n))return null;const s=W(t)/W(n);if(s===1)return null;switch(e){case"point":case"esriGeometryPoint":return i=>kn(i,s);case"polyline":case"esriGeometryPolyline":return i=>Rn(i,s);case"polygon":case"esriGeometryPolygon":return i=>vn(i,s);case"multipoint":case"esriGeometryMultipoint":return i=>jn(i,s);case"extent":case"esriGeometryEnvelope":return i=>xn(i,s);default:return null}}function kn(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function vn(e,t){if(e)for(const n of e.rings)for(const s of n)s.length>2&&(s[2]*=t)}function Rn(e,t){if(e)for(const n of e.paths)for(const s of n)s.length>2&&(s[2]*=t)}function jn(e,t){if(e)for(const n of e.points)n.length>2&&(n[2]*=t)}function xn(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}function B(e,t,n,s,i,o){return E[0]=e,E[1]=t,E[2]=n,O(E,s,0,i,o,0)}const E=V();let S=0;class v{static fromGE(t){const n=new v;return n._wkt=t.wkt,n._wkid=t.wkid,n._isInverse=t.isInverse,n}constructor(t){this.uid=S++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=S++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=S++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=S++}getInverse(){const t=new v;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}class m{static cacheKey(t,n){var s,i,o,r,u,l;return[((s=t.wkid)==null?void 0:s.toString())??"-1",((i=t.wkt)==null?void 0:i.toString())??"",((o=t.wkt2)==null?void 0:o.toString())??"",((r=n.wkid)==null?void 0:r.toString())??"-1",((u=n.wkt)==null?void 0:u.toString())??"",((l=n.wkt2)==null?void 0:l.toString())??""].join()}static fromGE(t){const n=new m;let s="";for(const i of t.steps){const o=v.fromGE(i);n.steps.push(o),s+=o.uid.toString()+","}return n._cachedProjection={},n._gtlistentry=null,n._chain=s,n}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const n of t.steps)n instanceof v?this.steps.push(n):this.steps.push(new v({wkid:n.wkid,wkt:n.wkt,isInverse:n.isInverse}))}getInverse(){const t=new m;t.steps=[];for(let n=this.steps.length-1;n>=0;n--){const s=this.steps[n];t.steps.push(s.getInverse())}return t}getGTListEntry(){let t="";for(const n of this.steps)t+=n.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,n,s){this._cachedProjection[m.cacheKey(t,n)]=s}getCachedGeTransformation(t,n){let s="";for(const o of this.steps)s+=o.uid.toString()+",";s!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=s);const i=this._cachedProjection[m.cacheKey(t,n)];return i===void 0?null:i}}let d=null,_=null,R=null,$={};const A=new mn;function G(){return!!d&&gn()}function Q(){return!!G()||(H(A),x(),!1)}function Pn(e,t){return!e||!t||y(e,t)||Q()}function Gn(e,t){return!y(e,t)&&!G()}function x(e){return R==null&&(R=Promise.all([rn(),b(()=>import("./index-C1aGfQcb.js").then(t=>t.nO),__vite__mapDeps([0,1])).then(t=>t.g),b(()=>import("./index-C1aGfQcb.js").then(t=>t.nP),__vite__mapDeps([0,1]))])),R.then(([,t,{hydratedAdapter:n}])=>{ln(e),_=n,d=t.default,d._enableProjection(un),A.notify()})}function U(e,t,n=null,s=null){return Array.isArray(e)?e.length===0?[]:Z(_,e,e[0].spatialReference,t,n,s):Z(_,[e],e.spatialReference,t,n,s)[0]}function Z(e,t,n,s,i=null,o=null){if(n==null||s==null)return t;if(y(n,s,i))return t.map(r=>M(r,n,s));if(i==null&&C(n))return t.map(r=>M(r,n,L.WGS84)).map(r=>P(r,s));if(i==null&&C(s))return t.map(r=>P(r,L.WGS84)).map(r=>M(r,L.WGS84,s));if(i==null){const r=m.cacheKey(n,s);$[r]!==void 0?i=$[r]:((i=N(n,s,void 0))==null&&(i=new m),$[r]=i)}if(d==null||e==null)throw new T;return o!=null?d._project(e,t,n,s,i,o):d._project(e,t,n,s,i)}function In(e,t){const n=J([e],t);return n.pending!=null?{pending:n.pending,geometry:null}:n.geometries!=null?{pending:null,geometry:n.geometries[0]}:{pending:null,geometry:null}}function J(e,t){if(!G()){for(const n of e)if(n!=null&&!j(n.spatialReference,t)&&g(n.spatialReference)&&g(t)&&!y(n.spatialReference,t))return H(A),{pending:x(),geometries:null}}return{pending:null,geometries:e.map(n=>n==null?null:j(n.spatialReference,t)?n:g(n.spatialReference)&&g(t)?P(n,t):null)}}function N(e,t,n=null){if(e==null||t==null)return null;if(d==null||_==null)throw new T;const s=d._getTransformation(_,e,t,n,n==null?void 0:n.spatialReference);return s!==null?m.fromGE(s):null}function zn(e,t,n=null){if(d==null||_==null)throw new T;const s=d._getTransformationBySuitability(_,e,t,n,n==null?void 0:n.spatialReference);if(s!==null){const i=[];for(const o of s)i.push(m.fromGE(o));return i}return[]}class T extends an{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function En(){d=null,_=null,R=null,$={}}const Sn={get loadPromise(){return R}};function P(e,t){try{const n=U(e,t);if(n==null)return null;"xmin"in e&&"xmin"in n&&(n.zmin=e.zmin,n.zmax=e.zmax);const s=yn(n.type,e.spatialReference,t);return s!=null&&s(n),n}catch(n){if(!(n instanceof T))throw n;return null}}async function $n(e,t,n){const s=e.spatialReference;return s!=null&&t!=null&&await X(s,t,null,n),P(e,t)}function y(e,t,n){return!n&&(!!j(e,t)||g(e)&&g(t)&&!!wn(e,t,_n))}function Mn(e,t){if(j(e,t))return!0;if(!g(e)||!g(t))return!1;const n=D(e)||F(e)||q(e),s=D(t)||F(t)||q(t);return n&&s}async function X(e,t,n,s){if(G())return K(s);if(Array.isArray(e)){for(const{source:i,dest:o,geographicTransformation:r}of e)if(i&&o&&!y(i,o,r))return x(s)}else if(e&&t&&!y(e,t,n))return x(s);return K(s)}function M(e,t,n){return e?"x"in e?Y(e,t,new cn,n,0):"xmin"in e?sn(e,t,new fn,n,0):"rings"in e?en(e,t,new hn,n,0):"paths"in e?tn(e,t,new pn,n,0):"points"in e?nn(e,t,new dn,n,0):null:null}function On(e,t,n=t.spatialReference,s=0){return n!=null&&e.spatialReference!=null&&Y(e,e.spatialReference,t,n,s)!=null}function Y(e,t,n,s,i){a[0]=e.x,a[1]=e.y;const o=e.z;return a[2]=o!==void 0?o:i,O(a,t,0,a,s,0)?(n.x=a[0],n.y=a[1],n.spatialReference=s,o!==void 0||w(s)?(n.z=a[2],n.hasZ=!0):(n.z=void 0,n.hasZ=!1),e.m===void 0?(n.m=void 0,n.hasM=!1):(n.m=e.m,n.hasM=!0),n):null}function Tn(e,t,n=t.spatialReference,s=0){return e.spatialReference!=null&&n!=null&&nn(e,e.spatialReference,t,n,s)!=null}function nn(e,t,n,s,i){const{points:o,hasZ:r,hasM:u}=e,l=[],h=o.length,p=[];for(const c of o)p.push(c[0],c[1],r?c[2]:i);if(!O(p,t,0,p,s,0,h))return null;const f=r||w(s);for(let c=0;c<h;++c){const k=3*c,I=p[k],z=p[k+1];f&&u?l.push([I,z,p[k+2],o[c][3]]):f?l.push([I,z,p[k+2]]):u?l.push([I,z,o[c][2]]):l.push([I,z])}return n.points=l,n.spatialReference=s,n.hasZ=r,n.hasM=u,n}function Ln(e,t,n=t.spatialReference,s=0){return e.spatialReference!=null&&n!=null&&tn(e,e.spatialReference,t,n,s)!=null}function tn(e,t,n,s,i){const{paths:o,hasZ:r,hasM:u}=e,l=[];if(!on(o,r??!1,u??!1,t,l,s,i))return null;const h=r||w(s);return n.paths=l,n.spatialReference=s,n.hasZ=h,n.hasM=u,n}function Zn(e,t,n=t.spatialReference,s=0){return e.spatialReference!=null&&n!=null&&en(e,e.spatialReference,t,n,s)!=null}function en(e,t,n,s,i){const{rings:o,hasZ:r,hasM:u}=e,l=[];if(!on(o,r??!1,u??!1,t,l,s,i))return null;const h=r||w(s);return n.rings=l,n.spatialReference=s,n.hasZ=h,n.hasM=u,n}function An(e,t,n=t.spatialReference,s=0){return e.spatialReference!=null&&n!=null&&sn(e,e.spatialReference,t,n,s)!=null}function sn(e,t,n,s,i){const{xmin:o,ymin:r,xmax:u,ymax:l,hasZ:h,hasM:p}=e,f=h?e.zmin:i;if(!B(o,r,f,t,a,s))return null;const c=h||w(s);n.xmin=a[0],n.ymin=a[1],c&&(n.zmin=a[2]);const k=h?e.zmax:i;return B(u,l,k,t,a,s)?(n.xmax=a[0],n.ymax=a[1],c&&(n.zmax=a[2]),p&&(n.mmin=e.mmin,n.mmax=e.mmax),n.spatialReference=s,n):null}function on(e,t,n,s,i,o,r=0){const u=new Array;for(const p of e)for(const f of p)u.push(f[0],f[1],t?f[2]:r);if(!O(u,s,0,u,o,0))return!1;let l=0;i.length=0;const h=t||w(o);for(const p of e){const f=new Array;for(const c of p)h&&n?f.push([u[l++],u[l++],u[l++],c[3]]):h?f.push([u[l++],u[l++],u[l++]]):n?(f.push([u[l++],u[l++],c[2]]),l++):(f.push([u[l++],u[l++]]),l++);i.push(f)}return!0}const a=V(),Cn=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:y,getTransformation:N,getTransformations:zn,initializeProjection:X,isEqualBaseGCS:Mn,isLoaded:G,isLoadedOrLoad:Q,isLoadedOrLoadFor:Pn,load:x,project:U,projectExtent:An,projectMany:Z,projectMultipoint:Tn,projectOrLoad:In,projectOrLoadMany:J,projectPoint:On,projectPolygon:Zn,projectPolyline:Ln,projectWithZConversion:$n,projectWithoutEngine:M,requiresLoad:Gn,test:Sn,tryProjectWithZConversion:P,unload:En},Symbol.toStringTag,{value:"Module"}));export{On as $,Pn as B,P as H,y as J,U as K,Mn as L,X as N,Z as O,M as Q,In as V,x as W,J as X,N as Y,G as _,Zn as a,yn as o,Cn as p,m as s,B as t};
